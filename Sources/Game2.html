<!DOCTYPE html>
<html>
<head>
    <title>Game 2</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" tyle="text/css" href="style.css">
    <style>
        body {
            background-color: cornflowerblue;
        }
        div.number {
            
        }
        div.box {
            width: 26px;
            height: 28px;
            top: 64px;
            background: white;
            border-radius: 5px;
            position: absolute;
        }
        div.text {
            top: 2px;
            left: 7px;
            font-size: 20px;
            color: red;
            position: absolute;
        }
        #attention_box {
            width: 350px;
            height: 120px;
            top: 350px;
            left: 100px;
            display: none;
            text-align: center;
            background: palegoldenrod;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            border: 5px solid indianred;
            -moz-border-radius: 350px / 120px;
            -webkit-border-radius: 350px / 120px;
            border-radius: 350px / 120px;
            position: absolute;
        }
    </style>
    <script src="resize.js"></script>
</head>
<body onload="fixPosition()">
<div id="container">
    <div id="back_button" style="left: 20px; top: 30px; font-size: 20px; position: absolute;"><a href="Main.html" draggable="false">&#60; Back</a> </div>
    <div id="displayScore" style="left: 150px; top: 20px">
        <div class="ball" style="left: 10px; top: 10px"></div>
        <div class="ball" style="left: 35px; top: 10px"></div>
        <div class="ball" style="left: 60px; top: 10px"></div>
        <div class="ball "style="left: 85px; top: 10px"></div>
        <div class="ball"style="left: 110px; top: 10px"></div>
        <div class="ball" style="left: 135px; top: 10px"></div>
        <div class="ball" style="left: 160px; top: 10px"></div>
        <div class="ball" style="left: 185px; top: 10px"></div>
        <div class="ball" style="left: 210px; top: 10px"></div>
    </div>
    <div style="width: 800px; height: 1px; top: 75px; background: lightgrey; position: absolute"></div>
    <div id="game_display" style="width: 600px; height: 150px; border: 25px; background: #FFCC99; border-radius: 25px;left: 100px; top: 300px; position: relative; opacity: 0.2">
        <div class="number" style="left: 33px; top: 88px; font-size: 23px; font-weight: bold; opacity: 1">0</div>
        <div class="number" style="left: 283px; top: 88px; font-size: 23px; font-weight: bold; opacity: 1">5</div>
        <div class="number" style="left: 525px; top: 88px; font-size: 23px; font-weight: bold; opacity: 1">10</div>
        <div id="grasshopper" style="left: 23px; top: 0px; width: 40px; height: 40px; border-radius: 1px; 
        position: relative">
            <img id= "grasshopper" src="../Picture/grasshopper1.png" width="40px" height="40px" draggable="false">
        </div>
        <div style="width: 540px; background: black; height: 1px; float: left; left: 37px; top: 52px; position: absolute">
            <div style="left: 532px; top: -10px; position: absolute">&#62;</div>
            <div class="point" style="width: 2px"></div>
            <div class="point" style="left: 50px"></div>
            <div class="point" style="left: 100px"></div>
            <div class="point" style="left: 150px"></div>
            <div class="point" style="left: 200px"></div>
            <div class="point" style="width: 2px; left: 250px"></div>
            <div class="point" style="left: 300px"></div>
            <div class="point" style="left: 350px"></div>
            <div class="point" style="left: 400px"></div>
            <div class="point" style="left: 450px"></div>
            <div class="point" style="width: 2px; left: 500px"></div>
        </div>
    </div>
    <div id="start_button" style="left: 325px; top: 300px;" onclick="start()" onmouseover="over()" onmouseout="out()">
        <div id="start_button_1" style="left: 15px; top: 15px; width: 120px; height: 120px; border-radius: 15px; position:relative">
            <img id = "start_img" src="../Picture/Start0.png" width="120px" height="120px" style="border-radius: 120px" draggable="false">
        </div>
        <script>
            var start_button = document.getElementById("start_button");
            var start_button_1 = document.getElementById("start_button_1");
            var start_img = document.getElementById("start_img");
            function over() {
                start_button.style.left = "320px";
                start_button.style.top = "295px"
                start_button.style.width = "160px";
                start_button.style.height = "160px";
                start_button_1.style.left= "20px";
                start_button_1.style.top= "20px";
                start_img.src = "../Picture/Start1.png";
            }
            function out() {
                start_button.style.left= "325px";
                start_button.style.top = "300px";
                start_button.style.width = "150px";
                start_button.style.height = "150px";
                start_button_1.style.left= "15px";
                start_button_1.style.top= "15px";
                start_img.src = "../Picture/Start0.png";
            }
        </script>
    </div>
    <div id="home_button" style="left: 305px; top: 200px; font-size: 30px; display: none; position: absolute">
        <p><a href="Main.html"> Go to lesson </a></p>
    </div>
    <div id="attention_box">check</div>
</div>
    <script>
        var attention_box = document.getElementById("attention_box");
        var text = document.getElementsByClassName("text");
        var start_button = document.getElementById("start_button");
        var game_display = document.getElementById("game_display");
        var stage = 0;
        var status = 0;
        var ball = document.getElementsByClassName("ball");
        var box = document.getElementsByClassName("box");
        var grasshopper = document.getElementById("grasshopper");
        var number = document.getElementsByClassName("number");
        // To show number: number[-index-].style.display: block;

        var score = 0;
        var correct;
        make_question();
        function start() {
            status = 1;
            var t = setInterval(show, 20);
            var count = 0;

            function show() {
                
                if (count == 8) {
                    clearInterval(t);
                    start_button.style.display = 'none';
                }
                else {
                    count ++;
                    game_display.style.opacity = (count * 0.1) + 0.2;
                    start_button.style.opacity = 1 - (count * 0.1);
                }
            }
        }

        function make_question() {
            var k = Math.floor(Math.random() * 10);
            setgrasshopper(k);
            addEventListener('keydown' , function(event) {
                if(event.keyCode >= 48 && event.keyCode <= 57){
                    if(event.keyCode == k + 48) {
                        score++;
                        score_increase();
                        if(score < 9)   make_question();
                        else document.getElementById("home_button").style.display = 'block';
                    }
                    else {
                        if(score > 0 )  score_decrease();
                        make_question();
                    }
                }
            })
        }

        function setgrasshopper(a) {
            var pos = 23 + a * 50;
            grasshopper.style.left = pos + "px";
        }



        function score_increase() {
            var count = 0;
            var pos = 15 + ((9-score) * 25);
            var t = setInterval(move, 1);
            function move() {
                if (count >= 85) {
                    clearInterval(t);
                }
                else {
                    pos += 3;
                    count ++;
                    ball[9-score].style.left = pos + "px";
                }
            }
        }

        function score_decrease() {
            ball[8-score].style.background = 'red';
            var count = 0;
            var pos = 465 - (score * 25);
            var t = setInterval(move, 1);
            function move() {
                if (count >= 85) {
                    ball[8-score].style.background = "lawngreen";
                    clearInterval(t);
                }
                else {
                    pos -= 3;
                    count += 1;
                    ball[8-score].style.left = pos + "px";
                }
            }
        }
    </script>
</body>
</html>