<!DOCTYPE html>
<html>
    <head>
        <title>Game 3</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="style.css">
        <style>
            div.number {
                opacity: 0;
            }
            div.box {
                width: 28px;
                height: 30px;
                top: 64px;
                background: #FFCC99;
                border: yellow solid 5px;
                border-radius: 5px;
                display: none;
                position: absolute;
            }
            #box {
                width: 30px;
                height: 30px;
                top: -40px;
                left: -10px;
                background: red;
                position: absolute;
            }
            #dot {
                width: 10px;
                height: 10px;
                top: -5px;
                left: -4px;
                cursor: pointer;
                border-radius: 6px;
                background: black;
                position: absolute;
            }
            div.text {
                top: 2px;
                left: 7px;
                font-size: 20px;
                color: red;
                position: absolute;
            }
        </style>
        <script src="resize.js"></script>
        <script src="drag_and_drop.js"></script>
    </head>
    <body onload="fixPosition()">
        <div id="container">
            <div id="back_button" draggable="false" style="left: 20px; top: 30px; font-size: 20px; position: absolute;"><a href="Main.html" draggable="false">&#60; Back</a> </div>
            <div id="displayScore" style="left: 150px; top: 20px">
                <div class="ball" style="left: 10px; top: 10px"></div>
                <div class="ball" style="left: 35px; top: 10px"></div>
                <div class="ball" style="left: 60px; top: 10px"></div>
                <div class="ball "style="left: 85px; top: 10px"></div>
                <div class="ball"style="left: 110px; top: 10px"></div>
                <div class="ball" style="left: 135px; top: 10px"></div>
                <div class="ball" style="left: 160px; top: 10px"></div>
                <div class="ball" style="left: 185px; top: 10px"></div>
                <div class="ball" style="left: 210px; top: 10px"></div>
            </div>
            <div id="game_display" style="width: 600px; height: 110px; border: 25px; background: #FFCC99; border-radius: 25px;left: 100px; top: 300px; position: relative; opacity: 0.2">
                <div class="number" style="left: 33px; top: 68px; font-size: 23px; font-weight: bold; opacity: 1">0</div>
                <div class="number" style="left: 83px">1</div>
                <div class="number" style="left: 133px">2</div>
                <div class="number" style="left: 183px">3</div>
                <div class="number" style="left: 233px">4</div>
                <div class="number" style="left: 283px; top: 68px; font-size: 23px; font-weight: bold">5</div>
                <div class="number" style="left: 333px">6</div>
                <div class="number" style="left: 383px">7</div>
                <div class="number" style="left: 433px">8</div>
                <div class="number" style="left: 483px">9</div>
                <div class="number" style="left: 525px; top: 68px; font-size: 23px; font-weight: bold">10</div>
                <div style="width: 540px; background: black; height: 1px; float: left; left: 37px; top: 50px; position: absolute">
                    <div style="left: 535px; top: -9px; position: absolute">&#62;</div>
                    <div class="point" style="width: 2px"></div>
                    <div class="point" style="left: 50px"></div>
                    <div class="point" style="left: 100px"></div>
                    <div class="point" style="left: 150px"></div>
                    <div class="point" style="left: 200px"></div>
                    <div class="point" style="width: 2px; left: 250px"></div>
                    <div class="point" style="left: 300px"></div>
                    <div class="point" style="left: 350px"></div>
                    <div class="point" style="left: 400px"></div>
                    <div class="point" style="left: 450px"></div>
                    <div class="point" style="width: 2px; left: 500px"></div>
                    <div id="dot" onmousedown="mousedown(event)" >
                        <div id="box"></div>
                    </div>
                </div>
            </div>
            <div id="start_button" style="left: 325px; top: 300px; cursor: pointer" onclick="start()" onmouseover="over()" onmouseout="out()">
                <div id="start_button_1" style="left: 15px; top: 15px; width: 120px; height: 120px; border-radius: 15px; position:absolute">
                    <img id = "start_img" src="../Picture/Start0.png" width="120px" height="120px" style="border-radius: 120px" draggable="false">
                </div>
                <script>
                var start_button = document.getElementById("start_button");
                var start_button_1 = document.getElementById("start_button_1");
                var start_img = document.getElementById("start_img");
                function over() {
                    start_button.style.left = "320px";
                    start_button.style.top = "295px"
                   start_button.style.width = "160px";
                    start_button.style.height = "160px";
                    start_button_1.style.left= "20px";
                    start_button_1.style.top= "20px";
                   start_img.src = "../Picture/Start1.png";
                }
                function out() {
                    start_button.style.left= "325px";
                    start_button.style.top = "300px";
                    start_button.style.width = "150px";
                    start_button.style.height = "150px";
                    start_button_1.style.left= "15px";
                   start_button_1.style.top= "15px";
                   start_img.src = "../Picture/Start0.png";
                }
            </script>
            </div>
            <div id="home_button" style="left: 260px; top: 200px; font-size: 30px; display: none; position: absolute">
                <p><a href="Main.html"> Go to Lesson </a></p>
            </div>
        </div>
        <script>
            var box = document.getElementsByClassName("box");
            var index = 0;
            var start_button = document.getElementById("start_button");
            function start() {
                var count = 0;
                var t = setInterval(show, 20);
                function show() {
                    if (count == 8) {
                        clearInterval(t);
                        start_button.style.display = 'none';
                    }
                    else {
                        count ++;
                        game_display.style.opacity = (count * 0.1) + 0.2;
                        start_button.style.opacity = 1 - (count * 0.1);
                    }
                }
                new_question();
            }
            function new_question() {
                box[index].style.display = 'block';
            }
            var dot = document.getElementById("dot");
            var container = document.getElementById("container");
            var x;
            var dot_left = -5;
            var status = 0;
            function mousedown(ev) {
                x = ev.x;
                status = 1;
                document.addEventListener('mousemove', function (evt) {
                    if (status == 1) {
                        dot_left =  dot_left + event.x - x;
                        x = event.x;
                        if (dot_left < -4) dot.style.left = "-5px";
                        else if (dot_left > 496) dot.style.left = "595px";
                        else dot.style.left = dot_left + "px";
                    }
                });
            }
            addEventListener('mouseup', function () {
                status = 0;
                console.log(dot_left);
                if (dot_left > 496) dot_left = 496;
                else if (dot_left < -4) dot_left = -4;
                else {
                    var tmp = Math.round((dot_left + 4) / 50) * 50 - 4;
                    console.log(tmp);
                    var change;
                    if (tmp > dot_left) {change = 1;}
                    else change = -1;
                    var t = setInterval(move_to_near, 10);
                    function move_to_near() {
                        if(dot_left == tmp) {
                            clearInterval(t);
                        }
                        else {
                            dot_left += change;
                            dot.style.left = dot_left + "px";
                        }
                    }
                }
            });
        </script>
    </body>
</html>